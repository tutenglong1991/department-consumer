webpackJsonp([0],{"A/8S":function(a,e){},CcHl:function(a,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=t("mvHQ"),l=t.n(r),s={name:"apiAddPage",data:function(){return{apiDataSelection:{netProtocol:[{value:0,label:"http"},{value:1,label:"https"}],reqMethods:[{value:0,label:"get"},{value:1,label:"post"}],isForce:[{label:"Y",value:"Y"},{label:"N",value:"N"}],paramType:[{label:"String",value:"String"},{label:"Int",value:"Int"},{label:"float",value:"float"},{label:"boolean",value:"boolean"},{label:"Array",value:"Array"},{label:"Object",value:"Object"}],projectOptions:[]},apidata:{parameters:[],apiName:null,apiPath:null,apiDomain:null,netProtocol:null,reqMethods:null,reqUa:'{"Accept-Encoding": "utf-8","User-Agent": "hemeilong","Content-Type": "application/x-www-form-urlencoded"}',apiModule:null,ownPro:null,runStatus:0},reqTextarea:"",respTextarea:"",rules:{apiName:[{required:!0,message:"接口名称不能为空",trigger:"blur",color:"green"}],apiPath:[{required:!0,message:"接口地址不能为空",trigger:"blur"}],apiDomain:[{required:!0,message:"接口域名或ip不能为空",trigger:"blur"}],netProtocol:[{required:!0,message:"网络协议不能为空",trigger:"change"}],reqMethods:[{required:!0,message:"请求方式不能为空",trigger:"change"}],apiModule:[{required:!0,message:"所属模块不能为空",trigger:"blur"}],ownPro:[{required:!0,message:"所属项目不能为空",trigger:"change"}]},isParamsCheckedPass:!1}},methods:{editApi:function(a,e){var t=this;this.validParams(e),this.$refs[a].validate(function(a){if(a&&t.isParamsCheckedPass){var e=l()(t.apidata);return t.$axios.post("/apiAutoTest/apiInfo/editApi",e).then(function(a){200===a.status&&200===a.data.code?(console.log("发送Ajax请求,请求成功",a.data),t.$message({message:"接口修改成功",type:"success",color:"green"})):t.$message({showClose:!0,message:"接口修改失败",type:"error"})}).catch(function(a){console.log("发送Ajax请求,请求失败",a)})}return console.log("error submit!!"),!1})},runSingleApi:function(a,e){var t=this;this.validParams(e),this.$refs[a].validate(function(a){if(a&&t.isParamsCheckedPass){var e=l()(t.apidata);return t.$axios.post("/apiAutoTest/apiInfo/runSingleApi",e).then(function(a){console.log(a.data),200===a.status&&200===a.data.code?(console.log("发送Ajax请求,请求成功",a.data),t.$message({message:"接口执行成功",type:"success",color:"green"}),t.respTextarea=a.data.data.runResp,console.log(a.data.data.runResp),t.reqTextarea=a.data.data.runParam):t.$message({showClose:!0,message:"接口执行失败",type:"error"})}).catch(function(a){console.log("发送Ajax请求,请求失败",a)})}return console.log("error submit!!"),!1})},validParams:function(a){var e=this;0!==this.apidata.parameters.length?this.$refs[a].validate(function(a){a?(e.isParamsCheckedPass=!0,console.log(e.apidata.parameters)):(console.log("error submit!!"),console.log(e.apidata.parameters),e.isParamsCheckedPass=!1)}):this.isParamsCheckedPass=!0},getApiParameter:function(){var a=this,e={id:this.$route.params.id};return this.apidata.id=this.$route.params.id,this.$axios.get("/apiAutoTest/apiInfo/parameterOfApi",{params:e}).then(function(e){200===e.status&&200===e.data.code?(console.log("发送Ajax请求,请求成功",e.data),a.apidata.parameters=e.data.data):a.$message({showClose:!0,message:"获取接口参数失败",type:"error"})}).catch(function(a){console.log("发送Ajax请求,请求失败",a)})},resetParm:function(a){var e=this.apidata.parameters[a];for(var t in e)this.apidata.parameters[a][t]=""},addParam:function(){this.apidata.parameters.push({id:null,paramName:"",paramValue:"",isForce:"",paramType:"",paramRemark:"",ownApi_id:this.$route.params.id})},removeParam:function(a){var e=this.apidata.parameters.indexOf(a);-1!==e&&this.apidata.parameters.splice(e,1)},fallbackEditDate:function(){console.log(this.$route.params),this.apidata.apiName=this.$route.params.apiName,this.apidata.apiPath=this.$route.params.apiPath,this.apidata.apiDomain=this.$route.params.apiDomain,"http"===this.$route.params.netProtocol?this.apidata.netProtocol=0:"https"===this.$route.params.netProtocol&&(this.apidata.netProtocol=1),"get"===this.$route.params.reqMethods?this.apidata.reqMethods=0:"post"===this.$route.params.reqMethods&&(this.apidata.reqMethods=1),"未执行"===this.$route.params.runStatus?this.apidata.runStatus=0:"成功"===this.$route.params.runStatus?this.apidata.runStatus=1:"失败"===this.$route.params.runStatus&&(this.apidata.runStatus=2),this.apidata.reqUa=this.$route.params.reqUa,this.apidata.apiModule=this.$route.params.apiModule}},created:function(){this.fallbackEditDate()},mounted:function(){var a=this;this.getProjectOptions().then(function(e){for(var t in a.apiDataSelection.projectOptions=e.data,a.apiDataSelection.projectOptions)a.apiDataSelection.projectOptions[t].projectName===a.$route.params.ownPro&&(a.apidata.ownPro=a.apiDataSelection.projectOptions[t].id)}),this.getApiParameter()}},o={render:function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("el-container",[t("el-header",{staticStyle:{height:"15px"}},[t("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[t("el-breadcrumb-item",[a._v("接口自动化")]),a._v(" "),t("el-breadcrumb-item",{attrs:{to:{path:"/apiAutoTest/apiList"}}},[a._v("接口管理")]),a._v(" "),t("el-breadcrumb-item",[a._v("接口详情")])],1)],1),a._v(" "),t("el-main",[t("h1",[a._v("由【XXX】创建，【XXX】最后修改于【XXXX年-XX月-XX日 XX时-XX分】\n      "),t("a",{staticStyle:{color:"#04aa51"},attrs:{href:"http://127.0.0.1:8080/#/apiAutoTest/apiDetail/"}},[a._v("查看修改记录")])]),a._v(" "),t("el-form",{ref:"submitForm1",staticClass:"demo-dynamic",staticStyle:{width:"85%"},attrs:{model:a.apidata,rules:a.rules,"label-width":"80px"}},[t("el-row",[t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"接口名称",prop:"apiName"}},[t("el-input",{attrs:{autocomplete:"off",placeholder:"请输入接口名称"},model:{value:a.apidata.apiName,callback:function(e){a.$set(a.apidata,"apiName",e)},expression:"apidata.apiName"}})],1)],1),a._v(" "),t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"接口地址",prop:"apiPath"}},[t("el-input",{attrs:{autocomplete:"off",placeholder:"请输入接口地址"},model:{value:a.apidata.apiPath,callback:function(e){a.$set(a.apidata,"apiPath",e)},expression:"apidata.apiPath"}})],1)],1),a._v(" "),t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"域名/ip",prop:"apiDomain"}},[t("el-input",{attrs:{autocomplete:"off",placeholder:"请选择域名/ip"},model:{value:a.apidata.apiDomain,callback:function(e){a.$set(a.apidata,"apiDomain",e)},expression:"apidata.apiDomain"}})],1)],1),a._v(" "),t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"网络协议",prop:"netProtocol"}},[t("el-select",{attrs:{clearable:"",autocomplete:"off",placeholder:"请选择网络协议"},model:{value:a.apidata.netProtocol,callback:function(e){a.$set(a.apidata,"netProtocol",e)},expression:"apidata.netProtocol"}},a._l(a.apiDataSelection.netProtocol,function(a){return t("el-option",{key:a.value,attrs:{label:a.label,value:a.value}})}),1)],1)],1)],1),a._v(" "),t("el-row",[t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"请求方式",prop:"reqMethods"}},[t("el-select",{attrs:{clearable:"",autocomplete:"off",placeholder:"请选择请求方式"},model:{value:a.apidata.reqMethods,callback:function(e){a.$set(a.apidata,"reqMethods",e)},expression:"apidata.reqMethods"}},a._l(a.apiDataSelection.reqMethods,function(a){return t("el-option",{key:a.value,attrs:{label:a.label,value:a.value}})}),1)],1)],1),a._v(" "),t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"请求头",prop:"reqUa"}},[t("el-input",{attrs:{autocomplete:"off",placeholder:"设置请求头不设置即为默认值"},model:{value:a.apidata.reqUa,callback:function(e){a.$set(a.apidata,"reqUa",e)},expression:"apidata.reqUa"}})],1)],1),a._v(" "),t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"所属项目",prop:"ownPro"}},[t("el-select",{attrs:{clearable:"",autocomplete:"off",placeholder:"请选择所属项目"},model:{value:a.apidata.ownPro,callback:function(e){a.$set(a.apidata,"ownPro",e)},expression:"apidata.ownPro"}},a._l(a.apiDataSelection.projectOptions,function(e){return t("el-option",{key:e.id,attrs:{label:e.projectName,value:e.id}},[t("span",{staticStyle:{float:"left"}},[a._v(a._s(e.projectName))]),a._v(" "),t("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[a._v(a._s(e.id))])])}),1)],1)],1),a._v(" "),t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"所属模块",prop:"apiModule"}},[t("el-input",{attrs:{autocomplete:"off",placeholder:"请选择接口分组"},model:{value:a.apidata.apiModule,callback:function(e){a.$set(a.apidata,"apiModule",e)},expression:"apidata.apiModule"}})],1)],1)],1),a._v(" "),t("el-link",{attrs:{underline:!1,type:"success"},model:{value:a.apidata,callback:function(e){a.apidata=e},expression:"apidata"}},[a._v("URL："+a._s(this.apiDataSelection.netProtocol[this.apidata.netProtocol].label+"://"+this.apidata.apiDomain+this.apidata.apiPath))])],1),a._v(" "),t("el-row",{staticStyle:{"margin-left":"12px"}},[0===a.apidata.parameters.length?t("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"small"},on:{click:a.addParam}},[a._v("新增参数")]):a._e(),a._v(" "),t("el-button",{attrs:{type:"primary",size:"small",disabled:""},on:{click:a.addParam}},[a._v("格式化请求入参")]),a._v(" "),t("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return a.runSingleApi("submitForm1","submitForm2")}}},[a._v("运行接口")]),a._v(" "),t("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return a.editApi("submitForm1","submitForm2")}}},[a._v("保存")])],1),a._v(" "),t("el-input",{staticClass:"create-text",staticStyle:{"margin-left":"12px",width:"45%"},attrs:{type:"textarea",rows:10,placeholder:"请求参数..."},model:{value:a.reqTextarea,callback:function(e){a.reqTextarea=e},expression:"reqTextarea"}}),a._v(" "),t("el-input",{staticClass:"create-text",staticStyle:{"margin-left":"12px",width:"45%"},attrs:{type:"textarea",rows:10,placeholder:"返回参数..."},model:{value:a.respTextarea,callback:function(e){a.respTextarea=e},expression:"respTextarea"}}),a._v(" "),t("el-form",{ref:"submitForm2",attrs:{model:a.apidata,"label-width":"0px"}},[t("el-row",{staticStyle:{"font-family":"'Avenir', Helvetica, Arial, sans-serif","font-size":"14px",color:"#606266"},attrs:{gutter:20}},[t("el-col",{attrs:{span:4,push:1}},[t("span",[a._v("参数名称")])]),a._v(" "),t("el-col",{attrs:{span:3}},[t("span",[a._v("参数值")])]),a._v(" "),t("el-col",{attrs:{span:2,push:1}},[t("span",[a._v("是否必选")])]),a._v(" "),t("el-col",{attrs:{span:4,push:2}},[t("span",[a._v("类型")])]),a._v(" "),t("el-col",{attrs:{span:4,push:2}},[t("span",[a._v("注释")])])],1),a._v(" "),a._l(a.apidata.parameters,function(e,r){return t("el-row",{key:e.key,staticStyle:{"margin-left":"2px"},attrs:{gutter:20}},[t("el-col",{attrs:{span:3}},[t("el-form-item",{attrs:{prop:"parameters."+r+".paramName",rules:[{required:!0,message:"参数名不能为空",trigger:"blur"}]}},[t("el-input",{attrs:{placeholder:"请输入参数名",size:"small",clearable:""},model:{value:e.paramName,callback:function(t){a.$set(e,"paramName",t)},expression:"kv.paramName"}})],1)],1),a._v(" "),t("el-col",{attrs:{span:4}},[t("el-form-item",{attrs:{prop:"paramValue"}},[t("el-input",{attrs:{placeholder:"请输入参数值",size:"small",clearable:""},model:{value:e.paramValue,callback:function(t){a.$set(e,"paramValue",t)},expression:"kv.paramValue"}})],1)],1),a._v(" "),t("el-col",{staticClass:"params_options",attrs:{span:3}},[t("el-form-item",{attrs:{prop:"parameters."+r+".isForce",rules:[{required:!0,message:"参数是否必选不能为空",trigger:"change"}]}},[t("el-select",{attrs:{clearable:"",autocomplete:"off",placeholder:"请选择是否必选"},model:{value:e.isForce,callback:function(t){a.$set(e,"isForce",t)},expression:"kv.isForce"}},a._l(a.apiDataSelection.isForce,function(a){return t("el-option",{key:a.value,attrs:{label:a.label,value:a.value}})}),1)],1)],1),a._v(" "),t("el-col",{staticClass:"params_options",attrs:{span:3}},[t("el-form-item",{attrs:{prop:"parameters."+r+".paramType",rules:[{required:!0,message:"参数类型不能为空",trigger:"change"}]}},[t("el-select",{attrs:{clearable:"",autocomplete:"off",placeholder:"请选择参数类型"},model:{value:e.paramType,callback:function(t){a.$set(e,"paramType",t)},expression:"kv.paramType"}},a._l(a.apiDataSelection.paramType,function(a){return t("el-option",{key:a.value,attrs:{label:a.label,value:a.value}})}),1)],1)],1),a._v(" "),t("el-col",{attrs:{span:5,prop:"paramRemark"}},[t("el-form-item",[t("el-input",{attrs:{placeholder:"请输入参数备注信息",size:"small",clearable:""},model:{value:e.paramRemark,callback:function(t){a.$set(e,"paramRemark",t)},expression:"kv.paramRemark"}})],1)],1),a._v(" "),t("el-col",{staticStyle:{"margin-top":"5px"},attrs:{span:6}},[t("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"small"},on:{click:a.addParam}},[a._v("新增参数")]),a._v(" "),t("el-button",{attrs:{type:"danger",icon:"el-icon-minus",size:"small"},on:{click:function(t){return t.preventDefault(),a.removeParam(e)}}},[a._v("删除参数")]),a._v(" "),t("el-button",{attrs:{size:"small"},on:{click:function(e){return a.resetParm(r)}}},[a._v("重置")])],1)],1)})],2)],1)],1)},staticRenderFns:[]};var i=t("VU/8")(s,o,!1,function(a){t("A/8S")},"data-v-3f4893e5",null);e.default=i.exports}});
//# sourceMappingURL=0.js.map